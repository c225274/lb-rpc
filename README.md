rpc with service discovery and registry
